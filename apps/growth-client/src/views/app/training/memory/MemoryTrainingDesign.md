# 记忆训练游戏设计方案

## 一、等级要求设计（1-10级）

基于数据库中的全局等级模板，为记忆能力设计专门的训练内容和难度：

| 等级 | 经验值要求 | 等级名称 | 训练内容 | 游戏类型 | 难度参数 |
|------|-----------|---------|---------|---------|---------|
| 1级 | 10 | 初级 | 数字记忆（3-4位） | 数字序列记忆 | 序列长度：3-4，显示时间：3秒 |
| 2级 | 100 | 初级+ | 数字记忆（5-6位）+ 颜色记忆 | 数字序列记忆、颜色记忆 | 序列长度：5-6，显示时间：2.5秒 |
| 3级 | 500 | 中级 | 图形记忆（3x3网格） | 图形位置记忆 | 网格大小：3x3，图形数量：3-4 |
| 4级 | 1000 | 中级+ | 图形记忆（4x4网格）+ 数字记忆（7-8位） | 图形位置记忆、数字序列记忆 | 网格大小：4x4，序列长度：7-8，需要考核 |
| 5级 | 2500 | 高级 | 3D空间记忆（5个位置） | 3D空间记忆 | 位置数量：5，显示时间：4秒 |
| 6级 | 5000 | 高级+ | 3D空间记忆（7个位置）+ 图形记忆（5x5） | 3D空间记忆、图形位置记忆 | 位置数量：7，网格大小：5x5，需要考核 |
| 7级 | 10000 | 专家 | 多维度记忆（数字+颜色+位置） | 综合记忆挑战 | 序列长度：9-10，颜色数量：5-6，位置数量：5 |
| 8级 | 20000 | 专家+ | 动态记忆（移动轨迹） | 动态轨迹记忆 | 轨迹点数：8-10，移动速度：中等，需要考核 |
| 9级 | 50000 | 大师 | 复杂3D场景记忆 | 3D场景记忆 | 场景复杂度：高，物体数量：10-12 |
| 10级 | 100000 | 大师+ | 终极挑战（多维度+动态+3D） | 终极记忆挑战 | 综合所有难度，需要考核 |

## 二、游戏类型设计（参考最强大脑）

### 1. 数字序列记忆（1-4级）
**游戏规则**：
- 屏幕上依次显示一串数字
- 数字显示后消失
- 玩家需要按顺序输入刚才看到的数字

**难度递增**：
- 1级：3-4位数字，显示时间3秒
- 2级：5-6位数字，显示时间2.5秒
- 4级：7-8位数字，显示时间2秒

### 2. 颜色记忆（2级）
**游戏规则**：
- 屏幕上显示一系列彩色方块
- 方块按顺序闪烁
- 玩家需要按顺序点击对应的颜色

**难度参数**：
- 颜色数量：4-6种
- 显示时间：每个颜色0.8秒

### 3. 图形位置记忆（3-6级）
**游戏规则**：
- 屏幕上显示一个网格（3x3到5x5）
- 某些格子中显示图形（圆形、方形、三角形等）
- 图形显示后消失
- 玩家需要点击刚才显示图形的格子位置

**难度递增**：
- 3级：3x3网格，3-4个图形
- 4级：4x4网格，5-6个图形
- 6级：5x5网格，7-8个图形

### 4. 3D空间记忆（5-9级）
**游戏规则**（使用 Three.js 实现）：
- 3D场景中显示多个物体（球体、立方体等）
- 物体在3D空间中随机分布
- 物体显示后消失
- 玩家需要点击或选择刚才显示物体的位置

**难度递增**：
- 5级：5个物体，显示时间4秒
- 6级：7个物体，显示时间3.5秒
- 9级：10-12个物体，显示时间3秒

### 5. 综合记忆挑战（7级）
**游戏规则**：
- 同时记忆数字序列、颜色序列和位置
- 需要按顺序回忆所有信息

### 6. 动态轨迹记忆（8级）
**游戏规则**（使用 Three.js 实现）：
- 一个物体在3D空间中移动
- 形成一条轨迹路径
- 玩家需要记住轨迹的形状和方向
- 然后选择正确的轨迹

### 7. 3D场景记忆（9级）
**游戏规则**（使用 Three.js 实现）：
- 显示一个复杂的3D场景
- 包含多个不同形状、颜色的物体
- 物体分布在3D空间的不同位置
- 玩家需要记住场景的完整布局

### 8. 终极记忆挑战（10级）
**游戏规则**：
- 综合所有游戏类型
- 多轮挑战，每轮难度递增
- 需要同时记忆多个维度的信息

## 三、经验值计算规则

根据游戏表现计算经验值：

```typescript
基础经验值 = 等级基础值 * 难度系数
表现加成 = 正确率 * 速度加成 * 连续正确加成
最终经验值 = 基础经验值 * 表现加成

等级基础值：
- 1级：10点
- 2级：20点
- 3级：50点
- 4级：100点
- 5级：150点
- 6级：200点
- 7级：300点
- 8级：400点
- 9级：500点
- 10级：1000点

难度系数：
- 简单：1.0
- 中等：1.2
- 困难：1.5
- 极难：2.0

速度加成：
- 快速完成（< 平均时间50%）：1.3
- 正常完成（50%-150%）：1.0
- 慢速完成（> 150%）：0.8

连续正确加成：
- 连续5次正确：1.1
- 连续10次正确：1.2
- 连续20次正确：1.5
```

## 四、游戏流程

1. **选择等级**：用户选择要训练的等级（基于当前能力等级）
2. **游戏说明**：显示游戏规则和难度参数
3. **开始游戏**：进入游戏界面
4. **记忆阶段**：显示需要记忆的内容
5. **回忆阶段**：用户输入答案
6. **结果反馈**：显示正确率、用时等信息
7. **经验值计算**：根据表现计算经验值
8. **提交结果**：提交到后端，更新能力等级

## 五、技术实现

### 5.1 Three.js 场景设置

```typescript
// 创建3D场景
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({ antialias: true });

// 添加灯光
const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
```

### 5.2 游戏状态管理

使用 MobX Store 管理：
- 当前等级
- 游戏状态（准备、记忆、回忆、结果）
- 得分和统计
- 经验值计算

### 5.3 响应式设计

- 适配不同屏幕尺寸
- 支持鼠标和触摸操作
- 优化移动端性能

